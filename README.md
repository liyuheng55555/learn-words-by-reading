# 地学英语词汇填空练习工具

这是一个用于地学英语词汇学习和练习的网页工具。用户可以通过上传包含**标记词汇的文章文件，并进行填空练习来掌握地学相关的英语词汇及其中文含义。

## 功能特点

1. **双语词汇练习**：
   - 左侧显示包含地学专业词汇的英文文章
   - 右侧提供对应词汇的中文释义填空

2. **交互式学习**：
   - 点击文章中的词汇可跳转到对应的填空区域
   - 在填空区域输入答案后会自动保存到浏览器本地存储
   - 点击词汇可跳转回文章中的对应位置

3. **数据持久化**：
   - 自动保存用户的填空答案到浏览器的 localStorage
   - 可通过服务器同步功能备份判题结果

4. **清爽界面**：统一浅色视觉设计，适合长时间阅读与练习

5. **AI智能判题**（实验性功能）：
   - 可连接 OpenAI、Claude 等大语言模型 API 进行智能判题
   - 提供词汇翻译的语义相似度评分（0~1），并给出标准答案与说明
   - 支持多种模型（gpt-3.5-turbo、gpt-4、claude-3-sonnet等）
   - 若学生答案涵盖主要含义或常见近义词，即使不完整也会获得较高分

6. **词汇掌握度追踪**：
   - 判题结果可手动同步到本地 SQLite 后端
   - 自动累积每个词的总分、练习次数与最后一次提交时间
   - 统计 AI 判题的正确次数与错误次数，便于分析薄弱环节
   - 支持从词表中筛选低分词或未练习的新词

7. **AI文章自动取词**：
   - 可设置“练习过的词数 / 总词数 / 掌握阈值”
   - 优先挑选分数低于阈值的旧词，其余用未练习的新词补齐
   - 一键填入目标词汇，便于快速生成含 ** 标记的文章

## 使用方法

1. 打开 `geo_vocab_fill_in_webpage_english→chinese.html` 文件
2. 点击"编辑模式"按钮，在文本框中输入包含**标记词汇的Markdown格式文章
3. 点击"保存文章"按钮保存并切换到阅览模式
4. 在右侧填空区输入对应词汇的中文含义
5. 输入内容会自动保存
6. （可选）在项目根目录运行 `npm start` 启动本地后端，首次会载入 `data/vocabulary.csv`
7. 可使用以下按钮：
   - **清空答案**：清除所有已填写的答案
   - **同步到服务器**：上传最近一次判题结果，返回本次提交词汇的累计分数
   - **🎯 自动取词**：根据设定的数量与阈值自动填充目标词列表
   - **📊 词汇掌握情况**：打开新页面查看/管理所有词汇的分数与状态
   - **🤖 AI判题**：连接AI API进行智能判题
   - **🔍 检测AI身份**：查看当前连接的AI模型信息

## 词汇列表

工具会自动从上传的文章中提取用**标记的地学相关词汇，并生成对应的填空练习。

## 技术实现

- 纯前端实现，无需服务器支持
- 使用 HTML、CSS 和 JavaScript 构建
- 数据存储在浏览器本地，不会上传到任何服务器
- 完全离线运行

## AI判题配置

要使用AI判题功能，需要配置：
1. API地址：例如 `https://api.openai.com/v1/chat/completions`
2. AI模型：例如 `gpt-3.5-turbo` 或 `claude-3-sonnet`
3. API Key：从对应平台获取的API密钥

## 文件说明

- `geo_vocab_fill_in_webpage_english→chinese.html`：主页面文件
- `styles.css`：样式文件
- `script.js`：交互逻辑文件
- `server/index.js`：Node.js + SQLite 计分服务
- `data/vocabulary.csv`：初始化载入的基础词表

## 后端服务说明

1. 安装依赖：本项目使用原生 Node.js 与系统自带的 `sqlite3` 命令，无需额外 npm 包。
2. 启动服务：在项目根目录执行 `npm start`，默认监听 `http://localhost:4000`。
3. 核心接口：
   - `POST /api/word-scores`：上传本次判题的词汇与相似度分数，累积得分并返回本次提交的词汇成绩（相似度 ≥ 0.6 计入正确次数，否则计入错误次数）。
   - `GET /api/word-suggestions`：根据「练习过的词数」「总词数」「掌握阈值」筛选低分词与未练习新词。
   - `GET /api/word-scores`：返回全部词汇成绩，以及正确/错误次数统计，可用于调试或可视化。
4. 数据存储：词表信息保存在 `data/word_scores.db`，首次启动会载入 `data/vocabulary.csv`。

## 注意事项

- 主体功能可离线使用；若需同步分数或自动取词，请启动本地后端。
- 使用AI判题功能需要有效的API密钥。
